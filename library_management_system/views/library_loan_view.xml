<odoo>
    <record id ='library_loan_form' model= 'ir.ui.view'>
        <field name='name'>library.loan.form</field>
        <field name='model'>library.loan</field>
        <field name='arch' type='xml'> 
            <form string ='Library Loan'>
                <header>
                        <field name="state" widget="statusbar"
                            statusbar_visible="draft,ongoing,done,overdue"
                            statusbar_status="state"/>
                        <button name="action_check_overdue" type="object" string="Check overdue" invisible="state in ['draft','done','overdue']"/>
                        <button name="action_confirm_state" type="object" string="Confirm State" invisible="state in ['draft','done','overdue']"/>
                </header>
                <sheet>
                    <group>
                        <field name ='partner_id' />
                        <field name ='book_id' />
                        <field name ='date_start'/>
                        <field name ='date_due'/>
                        <field name ='days_until_due' />
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id='library_loan_list' model='ir.ui.view'>
        <field name ='name'>library.loan.list</field>
        <field name ='model'>library.loan</field>
        <field name ='arch' type ='xml'>
            <list string ='Library Loan'>
                <field name ='partner_id' />
                <field name ='book_id' />
            </list>
        </field>
    </record>
    <record id='lib_loan' model='ir.actions.act_window'> 
        <field name='name'> Library Loan </field>
        <field name='res_model'>library.loan</field>
        <field name='view_mode'>list,form</field>
    </record>
    <!-- action check overdue multi -->
    <record model="ir.actions.server" id="action_check_overdue_lib_loans">
        <field name="name"> Overdue</field>
        <field name="model_id" ref="model_library_loan"/>
        <field name="binding_model_id" ref="model_library_loan" />
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
            records.action_check_overdue()
        </field>
    </record>

    <menuitem id="library_loan_menu" name="Library Loan" parent="library_management_menu" action="lib_loan"/>
</odoo>